<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Guide to System Design Estimation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="./app.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF7;
            color: #2c3e50;
        }

        .nav-link {
            transition: color 0.3s ease, border-color 0.3s ease;
            border-bottom: 2px solid transparent;
        }

        .nav-link:hover,
        .nav-link.active {
            color: #3498db;
            border-bottom-color: #3498db;
        }

        .card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .modal-bg {
            background-color: rgba(0, 0, 0, 0.5);
            transition: opacity 0.3s ease;
        }

        .modal-box {
            transition: transform 0.3s ease, opacity 0.3s ease;
            transform: translateY(20px) scale(0.95);
            opacity: 0;
        }

        .modal-box.active {
            transform: translateY(0) scale(1);
            opacity: 1;
        }

        .tab-button.active {
            background-color: #3498db;
            color: white;
        }

        .filter-button.active {
            background-color: #2c3e50;
            color: white;
            border-color: #2c3e50;
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
    </style>
</head>

<body class="antialiased">

    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-40 w-full border-b border-gray-200">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <h1 class="text-xl md:text-2xl font-bold text-gray-800">System Design Estimation</h1>
                <nav class="hidden md:flex items-center space-x-6 text-gray-600">
                    <a href="#concepts" class="nav-link pb-1">Core Concepts</a>
                    <style>
                        body {
                            font-family: 'Inter', sans-serif;
                            background-color: #FDFBF7;
                            color: #2c3e50;
                        }

                        .nav-link {
                            transition: color 0.3s ease, border-color 0.3s ease;
                            border-bottom: 2px solid transparent;
                        }

                        .nav-link:hover,
                        .nav-link.active {
                            color: #3498db;
                            border-bottom-color: #3498db;
                        }

                        .card {
                            transition: transform 0.3s ease, box-shadow 0.3s ease;
                        }

                        .card:hover {
                            transform: translateY(-5px);
                            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
                        }

                        .modal-bg {
                            background-color: rgba(0, 0, 0, 0.5);
                            transition: opacity 0.3s ease;
                        }

                        .modal-box {
                            transition: transform 0.3s ease, opacity 0.3s ease;
                            transform: translateY(20px) scale(0.95);
                            opacity: 0;
                            width: 100vw;
                            max-width: 100vw;
                            min-width: 0;
                        }

                        @media (min-width: 640px) {
                            .modal-box {
                                max-width: 32rem;
                            }
                        }

                        .modal-box.active {
                            transform: translateY(0) scale(1);
                            opacity: 1;
                        }

                        .tab-button.active {
                            background-color: #3498db;
                            color: white;
                        }

                        .filter-button.active {
                            background-color: #2c3e50;
                            color: white;
                            border-color: #2c3e50;
                        }

                        .accordion-content {
                            max-height: 0;
                            overflow: hidden;
                            transition: max-height 0.5s ease-in-out;
                        }

                        /* Responsive grid for problems */
                        #problems-grid {
                            display: grid;
                            grid-template-columns: 1fr;
                            gap: 1.5rem;
                        }

                        @media (min-width: 640px) {
                            #problems-grid {
                                grid-template-columns: repeat(2, 1fr);
                            }
                        }

                        @media (min-width: 1024px) {
                            #problems-grid {
                                grid-template-columns: repeat(3, 1fr);
                            }
                        }

                        /* Responsive padding for modal */
                        #modal-box {
                            padding: 0.5rem;
                        }

                        @media (min-width: 640px) {
                            #modal-box {
                                padding: 1.5rem;
                            }
                        }

                        /* Responsive header */
                        .container {
                            max-width: 100vw;
                            padding-left: 0.5rem;
                            padding-right: 0.5rem;
                        }

                        @media (min-width: 640px) {
                            .container {
                                max-width: 640px;
                            }
                        }

                        @media (min-width: 768px) {
                            .container {
                                max-width: 768px;
                            }
                        }

                        @media (min-width: 1024px) {
                            .container {
                                max-width: 1024px;
                            }
                        }

                        @media (min-width: 1280px) {
                            .container {
                                max-width: 1280px;
                            }
                        }

                        /* Make chart containers scrollable on mobile */
                        .chart-container {
                            overflow-x: auto;
                        }
                    </style>
                    <a href="#explorer" class="nav-link pb-1">Problem Explorer</a>
                    <a href="#synthesis" class="nav-link pb-1">Synthesis</a>
                </nav>
                <button id="mobile-menu-button" class="md:hidden p-2 rounded-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16m-7 6h7" />
                    </svg>
                </button>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-4 pt-2 pb-4 space-y-2">
            <a href="#concepts" class="block nav-link">Core Concepts</a>
            <a href="#explorer" class="block nav-link">Problem Explorer</a>
            <a href="#synthesis" class="block nav-link">Synthesis</a>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 md:py-12">
        <main class="container mx-auto px-2 py-4 md:py-12">

            <!-- Introduction -->
            <section id="intro" class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">The Art of Quantitative Design</h2>
                <p class="max-w-3xl mx-auto text-gray-600 leading-relaxed">
                    In system design, estimation is more than arithmetic; it's a tool for navigating ambiguity and
                    making
                    justified decisions. These calculations identify critical constraints, mitigate risks like traffic
                    surges or costly data migrations, and ground architectural choices in a quantitative foundation.
                    This
                    guide provides an interactive way to master this essential engineering skill.
                </p>
            </section>

            <!-- Core Concepts -->
            <section id="concepts" class="mb-16">
                <h2 class="text-3xl font-bold text-center mb-12">Core Concepts</h2>
                <div class="grid md:grid-cols-2 gap-8 items-start">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
                        <!-- 5-Step Framework -->
                        <div id="framework-accordion">
                            <h3 class="text-2xl font-semibold mb-4 text-center md:text-left">The 5-Step Estimation
                                Framework
                            </h3>
                            <!-- Accordion Items will be injected here by JS -->
                        </div>

                        <!-- Reference Tables & Chart -->
                        <div>
                            <h3 class="text-2xl font-semibold mb-4 text-center md:text-left">Key Reference Data</h3>
                            <p class="text-gray-600 mb-6 text-center md:text-left">Having these figures at your
                                fingertips is an
                                engineering superpower. They allow you to quickly validate assumptions and make informed
                                decisions about technology choices without breaking your problem-solving flow.</p>
                            <div id="reference-tables-container" class="space-y-4">
                                <div class="bg-white p-6 rounded-lg shadow-md">
                                    <h4 class="font-semibold text-lg mb-2">Latency Numbers Every Engineer Must Know</h4>
                                    <p class="text-sm text-gray-500 mb-4">The vast differences in latency justify major
                                        architectural decisions like caching. A key goal is to shift work from
                                        high-latency
                                        (disk) to low-latency (memory) operations. This chart uses a logarithmic scale
                                        to
                                        visualize these massive gaps.</p>
                                    <div class="chart-container relative h-80 md:h-96 w-full max-w-2xl mx-auto">
                                        <canvas id="latencyChart"></canvas>
                                    </div>
                                </div>
                                <!-- Other tables will be injected here -->
                            </div>
                        </div>
                    </div>
            </section>

            <!-- Problem Explorer -->
            <section id="explorer" class="mb-16">
                <h2 class="text-3xl font-bold text-center mb-4">Problem Explorer</h2>
                <p class="text-center text-gray-600 mb-8">Select a domain to explore real-world system design challenges
                    and
                    their quantitative estimations.</p>

                <div id="filters" class="flex justify-center space-x-2 md:space-x-4 mb-8">
                    <!-- Filter buttons will be injected here -->
                </div>

                <div id="problems-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div id="problems-grid" class="gap-6">
                        <!-- Problem cards will be injected here -->
                    </div>
            </section>

            <!-- Synthesis -->
            <section id="synthesis" class="mb-16">
                <h2 class="text-3xl font-bold text-center mb-4">From Estimation to Architecture</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-12">
                    Fermi estimation is the bridge from requirements to concrete architectural patterns. The numbers you
                    calculate directly justify your choice of technology and design. This section synthesizes the key
                    takeaways, mapping common estimation outcomes to the architectural patterns they demand.
                </p>
                <div id="synthesis-container" class="max-w-4xl mx-auto">
                    <!-- Synthesis content will be injected here -->
                </div>
            </section>

        </main>

        <!-- Footer -->
        <footer class="border-t border-gray-200 bg-white">
            <div class="container mx-auto px-4 py-6 text-center text-gray-500">
                <p>Interactive System Design Guide | An Exploration of Fermi Estimation</p>
            </div>
        </footer>
        </div>
        </footer>

        <!-- Modal -->
        <div id="problem-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 hidden modal-bg">
            <div id="modal-box"
                class="bg-white rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col modal-box">
                <div class="flex justify-between items-center p-4 border-b">
                    <h3 id="modal-title" class="text-2xl font-bold"></h3>
                    <button id="close-modal"
                        class="text-gray-500 hover:text-gray-800 text-3xl leading-none">&times;</button>
                </div>
                <div class="p-6 overflow-y-auto">
                    <div class="mb-4">
                        <div id="modal-tabs" class="flex space-x-1 border-b">
                            <button data-tab="requirements"
                                class="tab-button py-2 px-4 font-semibold rounded-t-lg transition-colors duration-300">Requirements</button>
                            <button data-tab="estimations"
                                class="tab-button py-2 px-4 font-semibold rounded-t-lg transition-colors duration-300">Estimations</button>
                        </div>
                    </div>
                    <div id="modal-content">
                        <!-- Content will be injected here -->
                    </div>
                </div>
            </div>
        </div>
</body>

</html>
